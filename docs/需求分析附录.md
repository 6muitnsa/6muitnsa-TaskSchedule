## 附录：任务数据结构定义（Task Schema）

| 字段名 | 数据类型 | 是否必填 | 默认值 | 说明 |
|--------|-----------|----------|--------|------|
| id | string / UUID | 是 | 自动生成 | 任务唯一标识符 |
| name | string | 是 | 无 | 任务名称，用于显示与识别 |
| description | string | 否 | 空字符串 | 对任务的补充说明 |
| priority | int | 是 | 100 | 优先级数值。范围建议 0~1000，越大越优先。可由系统生成 |
| priority_mode | enum(`manual`, `relative`, `level`) | 否 | `level` | 用户如何设置优先级：手动、相对调节、等级映射 |
| priority_level | enum(`low`, `medium`, `high`, `critical`) | 否 | `medium` | 任务等级分类，仅在 `priority_mode = level` 下有效 |
| related_task_id | string | 否 | 无 | 若为相对优先级模式，指参照的任务 ID |
| relative_direction | enum(`higher`, `lower`) | 否 | 无 | 相对调节中，当前任务是否比目标任务更高优先级 |
| start_time | datetime | 是 | 创建时间 | 任务可执行的开始时间 |
| end_time | datetime | 是 | 创建时间 + 1h | 任务期望完成的最晚时间 |
| estimated_time | int（单位分钟） | 是 | 60 | 用户预计完成该任务所需时间 |
| is_periodic | boolean | 否 | false | 是否为周期性任务 |
| repeat_rule | object | 否 | null | 周期性任务设置，仅在 `is_periodic = true` 时存在 |
| → repeat_type | enum(`daily`, `weekly`, `custom`) | 否 | weekly | 重复类型：每日、每周、自定义 |
| → repeat_days | array<int> | 否 | [1] | 若 weekly，则为星期几数组（1=周一，7=周日） |
| → repeat_interval | int | 否 | 1 | 每多少天/周重复一次 |
| → repeat_count | int | 否 | 1 | 需要生成几次子任务 |
| → repeat_until | datetime | 否 | null | 若为定期结束的重复，设置截止时间 |
| repeat_children_ids | array<string> | 否 | [] | 自动展开生成的子任务ID列表 |
| execution_count | int | 否 | 1 | 用户希望在周期内完成几次 |
| status | enum(`todo`, `done`, `followup`, `cancelled`) | 否 | todo | 当前任务状态 |
| time_status | enum(`not_started`, `in_progress`, `overdue`) | 否 | 自动计算 | 根据当前时间判断任务的时间状态 |
| tags | array<string> | 否 | [] | 任务类型标签，如学习/工作/生活等 |
| allow_schedule | boolean | 否 | true | 是否允许被调度（false 表示锁定，如会议、课程） |
| locked_reason | string | 否 | 无 | 若任务上锁，可填写理由说明 |
| created_at | datetime | 是 | 当前时间 | 创建时间 |
| updated_at | datetime | 否 | 当前时间 | 最近一次修改时间 |
| deleted_at | datetime / null | 否 | null | 支持软删除时的标记时间 |
